(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1523307d"],{"1a5a":function(e,t,a){},"4f0d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 班级")]),a("el-breadcrumb-item",[e._v("添加")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"班级名称"}},[a("el-input",{model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1),a("el-form-item",{attrs:{label:"所属学院"}},[a("el-radio-group",{attrs:{"label-in-value":!0},on:{change:e.getMajorByCollegeId},model:{value:e.form.collegeId,callback:function(t){e.$set(e.form,"collegeId",t)},expression:"form.collegeId"}},e._l(e.collegeList,function(t,s){return a("el-radio",{key:s,staticStyle:{width:"180px"},attrs:{label:t.collegeId,value:t.collegeName,border:""}},[e._v(e._s(t.collegeName))])}),1)],1),a("el-form-item",{attrs:{label:"选择年级"}},[a("el-radio-group",{attrs:{"label-in-value":!0},on:{change:e.setGradeId},model:{value:e.gradeId,callback:function(t){e.gradeId=t},expression:"gradeId"}},e._l(e.gradeList,function(t,s){return a("el-radio",{key:s,attrs:{label:t.gradeId,value:t.gradeName,border:""}},[e._v(e._s(t.gradeName))])}),1)],1),a("el-form-item",{attrs:{label:"所属专业"}},[a("el-col",{attrs:{span:11}},[a("el-select",{attrs:{placeholder:"选择专业","label-in-value":!0},on:{change:e.setMajorId},model:{value:e.majorId,callback:function(t){e.majorId=t},expression:"majorId"}},e._l(e.majorList,function(e,t){return a("el-option",{key:t,attrs:{label:e.majorName,value:e.majorId}})}),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),a("el-button",[e._v("取消")])],1)],1)],1)]),a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 班级")]),a("el-breadcrumb-item",[e._v("管理")])],1)],1),a("hr"),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"筛选学院"},on:{change:e.filterClassListByCollege},model:{value:e.select_college,callback:function(t){e.select_college=t},expression:"select_college"}},[a("el-option",{staticStyle:{color:"red"}},[e._v("全部学院")]),e._l(e.collegeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.collegeName,value:e.collegeName}})})],2),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"筛选年级"},on:{change:e.filterClassListByGrade},model:{value:e.selecte_grade,callback:function(t){e.selecte_grade=t},expression:"selecte_grade"}},[a("el-option",{staticStyle:{color:"red"}},[e._v("全部年级")]),e._l(e.gradeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.gradeName,value:e.gradeName}})})],2),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜素班别"},on:{input:e.search},model:{value:e.search_word,callback:function(t){e.search_word=t},expression:"search_word"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.classList,border:""}},[a("el-table-column",{attrs:{prop:"className",label:"班级名称"}}),a("el-table-column",{attrs:{prop:"gradeName",label:"所属年级"}}),a("el-table-column",{attrs:{prop:"collegeName",label:"所属学院"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteClass(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"updateform",attrs:{model:e.updateform,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"班别"}},[a("el-input",{model:{value:e.updateform.className,callback:function(t){e.$set(e.updateform,"className",t)},expression:"updateform.className"}})],1),a("el-form-item",{attrs:{label:"学院"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"全部学院"},on:{change:e.setFormCollege},model:{value:e.updateform.collegeId,callback:function(t){e.$set(e.updateform,"collegeId",t)},expression:"updateform.collegeId"}},e._l(e.collegeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.collegeName,value:e.collegeId}})}),1)],1),a("el-form-item",{attrs:{label:"年级"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"全部学院"},on:{change:e.setFormGrade},model:{value:e.updateform.gradeId,callback:function(t){e.$set(e.updateform,"gradeId",t)},expression:"updateform.gradeId"}},e._l(e.gradeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.gradeName,value:e.gradeId}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteClassRow}},[e._v("确 定")])],1)])],1)},l=[],i=(a("7514"),{name:"baseform",data:function(){return{collegeList:"",majorList:"",gradeList:"",classList:"",gradeId:"",majorId:"",form:{className:"",collegeId:"",majorId:"",gradeId:"",gradeName:"",collegeName:""},select_college:"",selecte_grade:"",search_word:"",del_classId:"",del_status:"",del_list:[],tableData:[],editVisible:!1,delVisible:!1,oldClassList:"",updateform:{classId:"",gradeId:"",gradeName:"",className:"",collegeId:"",collegeName:"",majorId:""},idx:-1}},mounted:function(){this.getInitData()},methods:{getInitData:function(){var e=this;this.$axios.get(this.GLOBAL.BASE_URL+"/class/all").then(function(t){e.classList=t.data,e.oldClassList=t.data}),this.$axios.get(this.GLOBAL.BASE_URL+"/college/all").then(function(t){e.collegeList=t.data}),this.$axios.get(this.GLOBAL.BASE_URL+"/grade/all").then(function(t){e.gradeList=t.data})},onSubmit:function(){var e=this;this.form.className?this.form.collegeId?this.form.majorId?this.form.gradeId?this.$axios.post(this.GLOBAL.BASE_URL+"/class/add",{class:this.form}).then(function(t){200==t.data.status?(e.$message.success("添加班级："+e.form.className+"  成功！"),e.getInitData()):e.$message.error(t.data.msg)}):this.$message.error("请选择年级"):this.$message.error("请选择专业"):this.$message.error("请选择学院"):this.$message.error("请填写班级名称")},getMajorByCollegeId:function(e){var t=this;this.form.collegeId=e,this.collegeList.find(function(a){a.collegeId==e&&(t.form.collegeName=a.collegeName)}),""!=e&&this.$axios.post(this.GLOBAL.BASE_URL+"/major/collegeid/"+e).then(function(e){t.majorList=e.data})},setGradeId:function(e){var t=this;this.form.gradeId=e,this.gradeList.find(function(a){a.gradeId==e&&(t.form.gradeName=a.gradeName)})},setMajorId:function(e){this.form.majorId=e},formatter:function(e,t){return e.collegeName},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){this.idx=e;var a=this.classList[e];this.updateform={classId:a.classId,gradeId:a.gradeId,gradeName:a.gradeName,className:a.className,collegeId:a.collegeId,collegeName:a.collegeName,majorId:a.majorId},this.editVisible=!0},deleteClass:function(e,t){this.idx=e,this.delVisible=!0,this.del_classId=this.classList[e].classId},saveEdit:function(){var e=this;this.$set(this.classList,this.idx,this.updateform),this.$axios.post(this.GLOBAL.BASE_URL+"/class/update",{newClass:this.updateform}).then(function(t){200==t.data.status?(e.$message.success("修改班级成功"),e.editVisible=!1):e.$message.error("修改班级失败："+t.data.msg)})},deleteClassRow:function(){var e=this;this.$axios.post(this.GLOBAL.BASE_URL+"/class/delete",{classid:this.del_classId}).then(function(t){e.del_status=t.data.status,200==e.del_status?(e.classList.splice(e.idx,1),e.$message.success("删除编号为"+e.del_classId+"的班级成功")):e.$message.warning("删除编号为"+e.del_classId+"的专业失败"+t.data.msg)}),200!=this.del_status&&""!=this.del_status&&this.$message.warning("服务器或网络异常"),this.delVisible=!1},setFormCollege:function(e){var t={};t=this.collegeList.find(function(t){return t.collegeId===e}),this.updateform.collegeName=t.collegeName},setFormGrade:function(e){var t=this;this.updateform.gradeId=e,this.gradeList.find(function(a){a.gradeId==e&&(t.updateform.gradeName=a.gradeName)})},filterClassListByCollege:function(e){if(this.$message.success("选中："+e),"undefined"!=typeof e){var t=[];this.oldClassList.find(function(a){a.collegeName==e&&t.push(a)}),this.classList=t}else this.classList=this.oldClassList},filterClassListByGrade:function(e){if("undefined"!=typeof e){var t=[];this.oldClassList.find(function(a){a.gradeName==e&&t.push(a)}),this.classList=t}else this.classList=this.oldClassList},search:function(){var e=this,t=[];this.oldClassList.find(function(a){-1!=a.className.indexOf(e.search_word)&&t.push(a)}),this.classList=t}}}),o=i,r=(a("8527"),a("2877")),c=Object(r["a"])(o,s,l,!1,null,"75201f9b",null);t["default"]=c.exports},8527:function(e,t,a){"use strict";var s=a("1a5a"),l=a.n(s);l.a}}]);