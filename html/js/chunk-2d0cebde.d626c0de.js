(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cebde"],{"616c":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",[o("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 学生表单\n      ")]),o("el-breadcrumb-item",[e._v("添加学生")])],1)],1),o("div",{staticClass:"container"},[o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"学生姓名"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"学生学号"}},[o("el-input-number",{model:{value:e.form.stuId,callback:function(t){e.$set(e.form,"stuId",t)},expression:"form.stuId"}})],1),o("el-form-item",{attrs:{label:"选择学院"}},[o("el-radio-group",{attrs:{"label-in-value":!0},on:{change:e.getMajorByCollegeId},model:{value:e.form.collegeId,callback:function(t){e.$set(e.form,"collegeId",t)},expression:"form.collegeId"}},e._l(e.collegeList,function(t,s){return o("el-radio",{key:s,staticStyle:{width:"180px"},attrs:{label:t.collegeId,value:t.collegeName,border:""}},[e._v(e._s(t.collegeName))])}),1)],1),o("el-form-item",{attrs:{label:"选择年级"}},[o("el-radio-group",{attrs:{"label-in-value":!0},on:{change:e.getClassByGradeId},model:{value:e.gradeId,callback:function(t){e.gradeId=t},expression:"gradeId"}},e._l(e.gradeList,function(t,s){return o("el-radio",{key:s,attrs:{label:t.gradeId,value:t.gradeName,border:""}},[e._v(e._s(t.gradeName))])}),1)],1),o("el-form-item",{attrs:{label:"专业·班别"}},[o("el-col",{attrs:{span:11}},[o("el-select",{attrs:{placeholder:"选择专业","label-in-value":!0},on:{change:e.getClassByMajorId},model:{value:e.form.majorName,callback:function(t){e.$set(e.form,"majorName",t)},expression:"form.majorName"}},e._l(e.majorList,function(e,t){return o("el-option",{key:t,attrs:{label:e.majorName,value:e.majorId}})}),1)],1),o("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),o("el-col",{attrs:{span:11}},[o("el-select",{attrs:{placeholder:"选择班级","label-in-value":!0},on:{change:e.getClass},model:{value:e.form.classId,callback:function(t){e.$set(e.form,"classId",t)},expression:"form.classId"}},e._l(e.classList,function(e,t){return o("el-option",{key:t,attrs:{label:e.className,value:e.classId}})}),1)],1)],1),o("el-form-item",{attrs:{label:"性别"}},[o("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[o("el-radio",{attrs:{label:"男",border:""}}),o("el-radio",{attrs:{label:"女",border:""}})],1)],1),o("el-form-item",{attrs:{label:"联系电话"}},[o("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),o("el-form-item",{attrs:{label:"分配公寓"}},[o("el-radio-group",{attrs:{"label-in-value":!0},on:{change:e.getDormFloorByDormId},model:{value:e.dormId,callback:function(t){e.dormId=t},expression:"dormId"}},e._l(e.dormList,function(t,s){return o("el-radio",{key:s,staticStyle:{width:"180px"},attrs:{label:t.dormId,value:t.dormName,border:""}},[e._v(e._s(t.dormName))])}),1)],1),o("el-form-item",{attrs:{label:"楼层·房间"}},[o("el-col",{attrs:{span:11}},[o("el-select",{attrs:{placeholder:"选择楼层","label-in-value":!0},on:{change:e.getRoomByfloor},model:{value:e.floorLevel,callback:function(t){e.floorLevel=t},expression:"floorLevel"}},e._l(e.floorList,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),o("el-col",{staticClass:"line",attrs:{span:2}},[e._v("楼")]),o("el-col",{attrs:{span:11}},[o("el-select",{attrs:{placeholder:"选择房间","label-in-value":!0},on:{change:e.getRoomInfoById},model:{value:e.form.roomId,callback:function(t){e.$set(e.form,"roomId",t)},expression:"form.roomId"}},e._l(e.roomList,function(e,t){return o("el-option",{key:t,attrs:{label:e.roomName,value:e.roomId}})}),1)],1)],1),o("div",{staticClass:"plugins-tips"},[o("div",{staticStyle:{color:"red"}},[e._v(e._s(e.roomstatus))]),o("div",[e._v("可住人数："+e._s(e.currentRoom.bedCount))]),o("div",[e._v("已住人数："+e._s(e.currentRoom.memberTotal))])]),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),o("el-button",[e._v("取消")])],1)],1)],1)])])},a=[],r=(o("7514"),o("7f7f"),{name:"baseform",data:function(){return{collegeList:"",majorList:"",classList:"",dormList:"",floorList:"",roomList:"",gradeList:"",floorLevel:"",selectRoom:"",dormId:"",currentRoom:"",gradeId:"",roomstatus:"",form:{stuId:"",name:"",collegeName:"",collegeId:"",majorName:"",majorId:"",className:"",classId:"",gender:"",phone:"",roomId:"",roomName:""}}},mounted:function(){this.getInitData()},methods:{onSubmit:function(){var e=this;return this.form.name?this.form.stuId?this.form.collegeName?this.form.majorName?this.form.className?this.form.gender?this.form.roomName?void this.$axios.post(this.GLOBAL.BASE_URL+"/student/add",{student:this.form}).then(function(t){200==t.data.status?e.$message.success("添加学生："+e.form.name+"  成功！"):e.$message.error(t.data.msg)}):(this.$message.error("请选择房间"),!1):(this.$message.error("请选择性别"),!1):(this.$message.error("请选择班级"),!1):(this.$message.error("请选择专业"),!1):(this.$message.error("请选择学院"),!1):(this.$message.error("学号不能为空"),!1):(this.$message.error("姓名不能为空"),!1)},getInitData:function(){var e=this;this.$axios.get(this.GLOBAL.BASE_URL+"/college/all").then(function(t){e.collegeList=t.data}),this.$axios.get(this.GLOBAL.BASE_URL+"/dorm/all").then(function(t){e.dormList=t.data}),this.$axios.get(this.GLOBAL.BASE_URL+"/grade/all").then(function(t){e.gradeList=t.data})},getMajorByCollegeId:function(e){var t=this;this.classList="",this.form.className="",this.form.majorName="",this.form.className="",this.gradeId="",this.form.collegeId=e;var o={};o=this.collegeList.find(function(t){return t.collegeId===e}),this.form.collegeName=o.collegeName,""!=e&&this.$axios.get(this.GLOBAL.BASE_URL+"/major/collegeid/"+e).then(function(e){t.majorList=e.data}),this.$message("选择学院")},getClassByMajorId:function(e){var t=this;this.$message.success("选中专业"),this.form.className="",this.form.majorId=e;var o={};o=this.majorList.find(function(t){return t.majorId===e}),this.form.majorName=o.majorName,""!=e&&this.$axios.post(this.GLOBAL.BASE_URL+"/class/majorid",{majorId:e}).then(function(e){t.classList=e.data})},getClass:function(e){this.form.classId=e;var t={};t=this.classList.find(function(t){return t.classId===e}),this.form.className=t.className},getDormFloorByDormId:function(e){var t=this;this.$message("选中公寓："+e),this.floorList="",this.roomList="",this.form.roomName="",this.currentRoom="",this.dormId=e,this.$axios.get(this.GLOBAL.BASE_URL+"/dorm/dormid/"+e).then(function(e){t.floorList=e.data})},getRoomByfloor:function(e){var t=this;this.$message("选中的楼层："+e),this.roomList="",this.form.roomName="",this.currentRoom="",this.currentRoom="",this.$axios.get(this.GLOBAL.BASE_URL+"/room/"+this.dormId+"/"+e).then(function(e){t.roomList=e.data})},getRoomInfoById:function(e){var t={};if(t=this.roomList.find(function(t){return t.roomId===e}),t.memberTotal>=t.bedCount)return this.roomstatus="该房间已满员，请选择其他房间",this.$message.error("房间"+t.roomName+"已满员，请选择其他房间"),void(this.currentRoom=t);this.roomstatus="",this.currentRoom=t,this.form.roomName=t.roomName},getClassByGradeId:function(e){var t=this;this.$message("选择年级"+e),this.$axios.get(this.GLOBAL.BASE_URL+"/class/"+this.form.majorId+"/"+this.gradeId).then(function(e){return t.classList=e.data})}}}),l=r,i=o("2877"),m=Object(i["a"])(l,s,a,!1,null,null,null);t["default"]=m.exports}}]);