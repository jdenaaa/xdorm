(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-709d5ead"],{"463d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 管理专业")]),a("el-breadcrumb-item",[e._v("添加")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"专业名称"}},[a("el-input",{model:{value:e.form.majorName,callback:function(t){e.$set(e.form,"majorName",t)},expression:"form.majorName"}})],1),a("el-form-item",{attrs:{label:"所属学院"}},[a("el-radio-group",{attrs:{"label-in-value":!0},on:{change:e.getMajorByCollegeId},model:{value:e.form.collegeId,callback:function(t){e.$set(e.form,"collegeId",t)},expression:"form.collegeId"}},e._l(e.collegeList,function(t,l){return a("el-radio",{key:l,staticStyle:{width:"180px"},attrs:{label:t.collegeId,value:t.collegeName,border:""}},[e._v(e._s(t.collegeName))])}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),a("el-button",[e._v("取消")])],1)],1)],1)]),a("hr"),a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 管理专业")]),a("el-breadcrumb-item",[e._v("更新")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"全部学院"},on:{change:e.filterMajorList},model:{value:e.select_cate,callback:function(t){e.select_cate=t},expression:"select_cate"}},[a("el-option",{staticStyle:{color:"red"}},[e._v("全部学院")]),e._l(e.collegeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.collegeName,value:e.collegeName}})})],2),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜素专业名"},on:{input:e.search},model:{value:e.search_word,callback:function(t){e.search_word=t},expression:"search_word"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.majorList,border:""}},[a("el-table-column",{attrs:{prop:"majorName",label:"专业名称"}}),a("el-table-column",{attrs:{prop:"collegeName",label:"所属学院"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteMajor(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"updateform",attrs:{model:e.updateform,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"专业名称"}},[a("el-input",{model:{value:e.updateform.majorName,callback:function(t){e.$set(e.updateform,"majorName",t)},expression:"updateform.majorName"}})],1),a("el-form-item",{attrs:{label:"学院名称"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"全部学院"},on:{change:e.setFormCollege},model:{value:e.updateform.collegeId,callback:function(t){e.$set(e.updateform,"collegeId",t)},expression:"updateform.collegeId"}},e._l(e.collegeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.collegeName,value:e.collegeId}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteMajorRow}},[e._v("确 定")])],1)])],1)},o=[],s=(a("7514"),{name:"baseform",data:function(){return{collegeList:"",form:{collegeName:"",collegeId:"",majorName:""},select_cate:"",search_word:"",del_majorId:"",del_status:"",majorList:"",del_list:[],tableData:[],editVisible:!1,delVisible:!1,oldMajorList:"",updateform:{collegeId:"",collegeName:"",majorId:"",majorName:""},idx:-1}},mounted:function(){this.getInitData()},methods:{getInitData:function(){var e=this;this.$axios.get(this.GLOBAL.BASE_URL+"/major/all").then(function(t){e.majorList=t.data,e.oldMajorList=t.data}),this.$axios.get(this.GLOBAL.BASE_URL+"/college/all").then(function(t){e.collegeList=t.data})},getMajorByCollegeId:function(e){this.form.collegeId=e;var t={};t=this.collegeList.find(function(t){return t.collegeId===e}),this.form.collegeName=t.collegeName},onSubmit:function(){var e=this;this.form.majorName?this.form.collegeName?this.$axios.post(this.GLOBAL.BASE_URL+"/major/add",{major:this.form}).then(function(t){200==t.data.status?(e.$message.success("添加专业："+e.form.majorName+"  成功！"),e.getInitData()):e.$message.error(t.data.msg)}):this.$message.error("请选择学院!"):this.$message.error("请填写专业名称!")},formatter:function(e,t){return e.collegeName},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){this.idx=e;var a=this.majorList[e];this.updateform={collegeId:a.collegeId,collegeName:a.collegeName,majorName:a.majorName,majorId:a.majorId},this.editVisible=!0},deleteMajor:function(e,t){this.idx=e,this.delVisible=!0,this.del_majorId=this.majorList[e].majorId},saveEdit:function(){var e=this;this.$set(this.majorList,this.idx,this.updateform),this.$axios.post(this.GLOBAL.BASE_URL+"/major/update",{newMajor:this.updateform}).then(function(t){200==t.data.status?(e.$message.success("修改专业成功"),e.editVisible=!1):e.$message.error("修改专业失败："+t.data.msg)})},deleteMajorRow:function(){var e=this;this.$axios.post(this.GLOBAL.BASE_URL+"/major/delete",{majorid:this.del_majorId}).then(function(t){e.del_status=t.data.status,200==e.del_status?(e.majorList.splice(e.idx,1),e.$message.success("删除编号为"+e.del_majorId+"的专业成功")):e.$message.warning("删除编号为"+e.del_majorId+"的专业失败"+t.data.msg)}),200!=this.del_status&&""!=this.del_status&&this.$message.warning("服务器或网络异常"),this.delVisible=!1},setFormCollege:function(e){var t={};t=this.collegeList.find(function(t){return t.collegeId===e}),this.updateform.collegeName=t.collegeName},filterMajorList:function(e){if(this.$message.success("选中："+e),"undefined"!=typeof e){var t=[];this.oldMajorList.find(function(a){a.collegeName==e&&t.push(a)}),this.majorList=t}else this.majorList=this.oldMajorList},search:function(){var e=this,t=[];this.oldMajorList.find(function(a){-1!=a.majorName.indexOf(e.search_word)&&t.push(a)}),this.majorList=t}}}),i=s,r=(a("ceb2"),a("2877")),n=Object(r["a"])(i,l,o,!1,null,"5651f3be",null);t["default"]=n.exports},ceb2:function(e,t,a){"use strict";var l=a("d481"),o=a.n(l);o.a},d481:function(e,t,a){}}]);